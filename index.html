<!-- Restored full invoice app with Bill To, Logo Upload, Due Date, Invoice List + Professional Template -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice Generator</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background:#f2f2f2; }
input, textarea, select { width: 100%; margin: 5px 0 10px; padding: 8px; }
button { padding: 10px; margin: 5px 0; }
.invoice-row { display:flex; gap:20px; }
.invoice-col { flex:1; }
table { width:100%; border-collapse:collapse; background:white; }
th,td { border:1px solid #ccc; padding:8px; }
#invoiceTable { margin-top:20px; }
.status-paid { background:#c8f7c5; }
.status-unpaid { background:#fff5b0; }
.status-overdue { background:#f7c5c5; }
#logoPreview { max-width:180px; margin-bottom:10px; display:block; }
</style>
</head>
<body>
<h1>Invoice Generator</h1>

<h3>Upload Logo</h3>
<input type="file" id="logoInput" accept="image/*">
<img id="logoPreview">

<div class="invoice-row">
  <div class="invoice-col">
    <h3>Bill To</h3>
    <input id="clientName" placeholder="Client Name">
    <input id="clientPhone" placeholder="Client Phone">
    <input id="clientEmail" placeholder="Client Email">
  </div>

  <div class="invoice-col">
    <h3>Payee Details</h3>
    <input id="payeeName" placeholder="Your Business Name">
    <input id="payeeABN" placeholder="ABN">
    <input id="payeeAddress" placeholder="Business Address">
    <input id="payeePhone" placeholder="Phone">
    <input id="payeeEmail" placeholder="Email">
    <input id="payeeBSB" placeholder="BSB">
    <input id="payeeAccount" placeholder="Account Number">
  </div>
</div>

<h3>Invoice Details</h3>
<input id="invoiceNumber" placeholder="Invoice Number">
<label>Date</label>
<input type="date" id="invoiceDate">
<label>Due Date</label>
<input type="date" id="dueDate">
<select id="invoiceStatus">
<option>Unpaid</option>
<option>Paid</option>
<option>Overdue</option>
</select>

<h3>Items</h3>
<table>
<thead><tr><th>Description</th><th>Qty</th><th>Unit</th><th></th></tr></thead>
<tbody id="items"></tbody>
</table>
<button onclick="addItem()">Add Item</button>

<h3>Notes</h3>
<textarea id="notes"></textarea>
<button onclick="saveInvoice()">Save Invoice</button>

<hr>
<h2>Invoice List</h2>
<select id="filterStatus" onchange="renderInvoiceList()">
<option>All</option>
<option>Paid</option>
<option>Unpaid</option>
<option>Overdue</option>
</select>

<table id="invoiceTable">
<thead>
<tr><th>#</th><th>Client</th><th>Date</th><th>Due</th><th>Status</th><th>Actions</th></tr>
</thead>
<tbody></tbody>
</table>

<script>
let invoices = JSON.parse(localStorage.getItem("invoices")||"[]");
let itemsContainer = document.getElementById("items");
let logoDataURL = localStorage.getItem("invoiceLogo")||"";

document.getElementById("logoPreview").src = logoDataURL;
document.getElementById("logoInput").addEventListener("change",e=>{
 const f=e.target.files[0]; if(!f) return;
 const r=new FileReader(); r.onload=v=>{
 logoDataURL=v.target.result;
 localStorage.setItem("invoiceLogo",logoDataURL);
 document.getElementById("logoPreview").src = logoDataURL;
 }; r.readAsDataURL(f);
});

function addItem(){
 const row=document.createElement("tr");
 row.innerHTML=`<td><input class="desc"></td>
<td><input type="number" class="qty" value="1"></td>
<td><input type="number" class="unit" value="0" step="0.01"></td>
<td><button onclick="this.parentElement.parentElement.remove()">X</button></td>`;
 itemsContainer.appendChild(row);
}

window.onload=()=>{ addItem(); renderInvoiceList(); };

function saveInvoice(){
 const inv={
  clientName:clientName.value,
  clientPhone:clientPhone.value,
  clientEmail:clientEmail.value,
  payeeName:payeeName.value,
  payeeABN:payeeABN.value,
  payeeAddress:payeeAddress.value,
  payeePhone:payeePhone.value,
  payeeEmail:payeeEmail.value,
  payeeBSB:payeeBSB.value,
  payeeAccount:payeeAccount.value,
  invoiceNumber:invoiceNumber.value,
  invoiceDate:invoiceDate.value,
  dueDate:dueDate.value,
  status:invoiceStatus.value,
  notes:notes.value,
  logo:logoDataURL,
  items:[...document.querySelectorAll('#items tr')].map(r=>{
    return{
     description:r.querySelector('.desc').value,
     qty:parseFloat(r.querySelector('.qty').value)||0,
     unit:parseFloat(r.querySelector('.unit').value)||0
    }
  })
 };
 invoices.push(inv);
 localStorage.setItem("invoices",JSON.stringify(invoices));
 itemsContainer.innerHTML=""; addItem(); renderInvoiceList();
}

function renderInvoiceList(){
 const tbody=document.querySelector('#invoiceTable tbody');
 tbody.innerHTML="";
 const f=filterStatus.value;
 const today=new Date().toISOString().split("T")[0];

 invoices.forEach((inv,i)=>{
  if(inv.status!="Paid" && inv.dueDate < today) inv.status="Overdue";
  if(f!="All" && inv.status!=f) return;
  const row=document.createElement('tr');
  row.className = inv.status=="Paid"?"status-paid":inv.status=="Overdue"?"status-overdue":"status-unpaid";
  row.innerHTML=`
   <td>${inv.invoiceNumber}</td>
   <td>${inv.clientName}</td>
   <td>${inv.invoiceDate}</td>
   <td>${inv.dueDate}</td>
   <td>${inv.status}</td>
   <td><button onclick="openInvoice(${i})">Open</button><button onclick="markPaid(${i})">Paid</button><button onclick="delInv(${i})">Delete</button></td>`;
  tbody.appendChild(row);
 });
 localStorage.setItem("invoices",JSON.stringify(invoices));
}

function markPaid(i){ invoices[i].status="Paid"; renderInvoiceList(); }
function delInv(i){ if(confirm("Delete?")){ invoices.splice(i,1); renderInvoiceList(); localStorage.setItem("invoices",JSON.stringify(invoices)); }}

function openInvoice(i){
 const inv=invoices[i];
 const total = inv.items.reduce((a,b)=>a+b.qty*b.unit,0);
 const itemsHTML = inv.items.map(it=>`<tr><td>${it.description}</td><td>${it.qty}</td><td>$${it.unit.toFixed(2)}</td><td>$${(it.qty*it.unit).toFixed(2)}</td></tr>`).join('');
 const w=window.open();
 w.document.write(`<!DOCTYPE html><html><head><title>Invoice</title><style>
 body{font-family:Arial;padding:40px;}
 table{width:100%;border-collapse:collapse;margin-top:20px;}
 th,td{border:1px solid #ccc;padding:8px;}
 .row{display:flex;justify-content:space-between;}
 .total{font-size
