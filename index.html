<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Invoice Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .invoice-container {
      width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #000;
      padding-bottom: 15px;
      margin-bottom: 20px;
    }
    .logo img {
      max-width: 180px;
    }
    .invoice-details input {
      width: 180px;
      padding: 5px;
      margin: 5px 0;
    }
    .section {
      margin-top: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #333;
    }
    th, td {
      padding: 10px;
      text-align: left;
    }
    .status-paid { background: #b6ffb6; }
    .status-unpaid { background: #fff7a8; }
    .status-overdue { background: #ffb6b6; }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="invoice-container">

  <div class="header">
    <div class="logo">
      <img id="logoImg" src="" alt="Logo" />
    </div>
    <div class="invoice-details">
      <label>Invoice #:</label><br>
      <input id="invoiceNumber" type="text"><br>

      <label>Date:</label><br>
      <input id="invoiceDate" type="date"><br>

      <label>Status:</label><br>
      <select id="invoiceStatus">
        <option value="unpaid">Unpaid</option>
        <option value="paid">Paid</option>
        <option value="overdue">Overdue</option>
      </select>
    </div>
  </div>

  <div class="section">
    <h3>Bill To</h3>
    <textarea id="billTo" rows="4" style="width:100%"></textarea>
  </div>

  <div class="section">
    <h3>Items</h3>
    <table id="itemsTable">
      <tr>
        <th>Description</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
    </table>
    <button onclick="addItem()">Add Item</button>
  </div>

  <div class="section">
    <h3>Notes</h3>
    <textarea id="notes" rows="4" style="width:100%"></textarea>
  </div>

  <button onclick="openInvoiceTab()">Open Invoice in New Tab</button>
  <button onclick="saveInvoice()">Save Invoice</button>

</div>

<script>
// Load stored values
window.onload = () => {
  document.getElementById('invoiceNumber').value = localStorage.getItem('invoiceNumber') || '';
  document.getElementById('invoiceDate').value = localStorage.getItem('invoiceDate') || '';
  document.getElementById('notes').value = localStorage.getItem('notes') || '';
  document.getElementById('billTo').value = localStorage.getItem('billTo') || '';
  document.getElementById('logoImg').src = localStorage.getItem('logo') || '';
};

function saveInvoice() {
  localStorage.setItem('invoiceNumber', document.getElementById('invoiceNumber').value);
  localStorage.setItem('invoiceDate', document.getElementById('invoiceDate').value);
  localStorage.setItem('notes', document.getElementById('notes').value);
  localStorage.setItem('billTo', document.getElementById('billTo').value);
  alert('Invoice saved');
}

function addItem() {
  let table = document.getElementById('itemsTable');
  let row = table.insertRow();
  row.innerHTML = `
    <td><input type='text' style='width:100%'></td>
    <td><input type='number' style='width:70px'></td>
    <td><input type='number' style='width:90px'></td>
    <td><span>$0</span></td>`;
}

function openInvoiceTab() {
  const win = window.open('', '_blank');
  win.document.write(document.documentElement.outerHTML);
  win.document.close();
}
</script>

</body>
</html>
